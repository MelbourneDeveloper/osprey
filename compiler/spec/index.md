# Osprey Language Specification Index

1. [Introduction](0001-Introduction.md)
   - [Completeness](#11-completeness)
   - [Principles](#12-principles)
2. [Lexical Structure](0002-LexicalStructure.md)
   - [Identifiers](#21-identifiers)
   - [Keywords](#22-keywords)
   - [Literals](#23-literals)
   - [Operators](#24-operators)
   - [Delimiters](#25-delimiters)
3. [Syntax](0003-Syntax.md)
   - [Program Structure](#31-program-structure)
   - [Import Statements](#32-import-statements)
   - [Let Declarations](#33-let-declarations)
   - [Function Declarations](#34-function-declarations)
   - [Extern Declarations](#35-extern-declarations)
   - [Type Declarations](#36-type-declarations)
   - [Record Types and Type Constructors](#37-record-types-and-type-constructors)
   - [Expressions](#38-expressions)
   - [Block Expressions](#39-block-expressions)
   - [Match Expressions](#310-match-expressions)
4. [Semantics](0004-Semantics.md)
5. [Type System](0005-TypeSystem.md)
   - [Built-in Types](#51-built-in-types)
       - [Function Types](#function-types)
   - [Built-in Error Types](#52-built-in-error-types)
   - [Type Inference Rules](#53-type-inference-rules)
       - [Function Return Types](#function-return-types)
       - [Parameter Types](#parameter-types)
       - [Type Inference Examples](#type-inference-examples)
       - [Rationale](#rationale)
       - [Function Return Type "any" Restriction](#function-return-type-any-restriction)
       - [Common Validation Fixes](#common-validation-fixes)
   - [Type Safety and Explicit Typing](#54-type-safety-and-explicit-typing)
       - [Mandatory Type Safety](#mandatory-type-safety)
   - [Any Type Handling and Pattern Matching Requirement](#55-any-type-handling-and-pattern-matching-requirement)
       - [Forbidden Operations on `any` Types](#forbidden-operations-on-any-types)
       - [Legal Operations on `any` Types](#legal-operations-on-any-types)
       - [Pattern Matching Requirement](#pattern-matching-requirement)
       - [Direct Access Compilation Errors](#direct-access-compilation-errors)
       - [Function Return Type Handling](#function-return-type-handling)
       - [Type Annotation Pattern Syntax](#type-annotation-pattern-syntax)
       - [Compilation Error Messages](#compilation-error-messages)
       - [Exhaustiveness Checking for Any Types](#exhaustiveness-checking-for-any-types)
       - [Default Wildcard Behavior for Any Types](#default-wildcard-behavior-for-any-types)
       - [Type Constraint Checking](#type-constraint-checking)
       - [Context-Aware Type Validation](#context-aware-type-validation)
       - [Compilation Errors for Impossible Types](#compilation-errors-for-impossible-types)
       - [Performance and Safety Characteristics](#performance-and-safety-characteristics)
       - [Type Annotation Requirements](#type-annotation-requirements)
       - [Compilation Errors for Type Ambiguity](#compilation-errors-for-type-ambiguity)
       - [Error Handling Requirements](#error-handling-requirements)
   - [Type Compatibility](#56-type-compatibility)
6. [Function Calls](0006-FunctionCalls.md)
   - [Named Arguments Requirement](#61-named-arguments-requirement)
       - [Valid Function Calls](#valid-function-calls)
       - [Invalid Function Calls](#invalid-function-calls)
   - [Function Call Compilation Rules](#62-function-call-compilation-rules)
7. [String Interpolation](0007-StringInterpolation.md)
   - [Syntax](#71-syntax)
   - [Expression Support](#72-expression-support)
   - [Type Handling](#73-type-handling)
   - [Implementation](#74-implementation)
8. [Pattern Matching](0008-PatternMatching.md)
   - [Basic Patterns](#81-basic-patterns)
   - [Union Type Patterns](#82-union-type-patterns)
   - [Wildcard Patterns](#83-wildcard-patterns)
   - [Type Annotation Patterns](#84-type-annotation-patterns)
       - [Type Annotation Patterns](#type-annotation-patterns)
       - [Anonymous Structural Matching](#anonymous-structural-matching)
       - [Named Structural Matching](#named-structural-matching)
       - [Mixed Type and Structural Patterns](#mixed-type-and-structural-patterns)
   - [Match Expression Type Safety Rules](#85-match-expression-type-safety-rules)
9. [Block Expressions](0009-BlockExpressions.md)
   - [Block Scoping Rules](#91-block-scoping-rules)
   - [Block Return Values](#92-block-return-values)
   - [Performance Characteristics](#93-performance-characteristics)
10. [Boolean Operations](0010-BooleanOperations.md)
    - [Boolean Pattern Matching](#101-boolean-pattern-matching)
    - [Boolean Operators](#102-boolean-operators)
11. [Loop Constructs and Functional Iterators](0011-LoopConstructsAndFunctionalIterators.md)
    - [Functional Iteration Philosophy](#111-functional-iteration-philosophy)
    - [Core Iterator Functions](#112-core-iterator-functions)
        - [`range(start: int, end: int) -> Iterator<int>`](#rangestart-int-end-int---iteratorint)
        - [`forEach(iterator: Iterator<T>, function: T -> U) -> T`](#foreachiterator-iteratort-function-t---u---t)
        - [`map(iterator: Iterator<T>, function: T -> U) -> U`](#mapiterator-iteratort-function-t---u---u)
        - [`filter(iterator: Iterator<T>, predicate: T -> bool) -> T`](#filteriterator-iteratort-predicate-t---bool---t)
        - [`fold(iterator: Iterator<T>, initial: U, function: (U, T) -> U) -> U`](#folditerator-iteratort-initial-u-function-u-t---u---u)
    - [Pipe Operator](#113-pipe-operator)
        - [`|>` - Pipe Operator](#---pipe-operator)
    - [Functional Programming Patterns](#114-functional-programming-patterns)
        - [Chaining Pattern](#chaining-pattern)
        - [Side Effect Pattern](#side-effect-pattern)
        - [Data Transformation Pattern](#data-transformation-pattern)
    - [Why No Imperative Loops?](#115-why-no-imperative-loops)
12. [Lightweight Fibers and Concurrency](0012-LightweightFibersAndConcurrency.md)
    - [Fiber Types and Concurrency](#121-fiber-types-and-concurrency)
        - [Core Fiber Types](#core-fiber-types)
        - [Fiber Construction](#fiber-construction)
        - [Spawn Syntax Sugar](#spawn-syntax-sugar)
        - [Channel Construction](#channel-construction)
        - [Fiber Operations](#fiber-operations)
        - [Complete Fiber Example](#complete-fiber-example)
        - [Select Expression for Channel Multiplexing](#select-expression-for-channel-multiplexing)
        - [Rust Interoperability](#rust-interoperability)
    - [Fiber-Isolated Module System](#122-fiber-isolated-module-system)
        - [Module Isolation Principles](#module-isolation-principles)
        - [Module Declaration Syntax](#module-declaration-syntax)
        - [Fiber Isolation Behavior](#fiber-isolation-behavior)
        - [Memory and Performance Characteristics](#memory-and-performance-characteristics)
        - [Inter-Fiber Communication](#inter-fiber-communication)
    - [Server Applications and Long-Running Processes](#123-server-applications-and-long-running-processes)
        - [Functional Approaches to Server Persistence](#1231-functional-approaches-to-server-persistence)
            - [Fiber-Based Server Persistence](#12311-fiber-based-server-persistence)
            - [Recursive Function Patterns](#12312-recursive-function-patterns)
            - [Event-Driven Architecture with Channels](#12313-event-driven-architecture-with-channels)
            - [Functional Iterator-Based Processing](#12314-functional-iterator-based-processing)
        - [Why No Imperative Loops?](#1232-why-no-imperative-loops)
        - [Performance Considerations](#1233-performance-considerations)
13. [Built-in Functions](0013-Built-InFunctions.md)
    - [Basic I/O Functions](#131-basic-io-functions)
    - [File System Functions](#132-file-system-functions)
    - [Process Operations](#133-process-operations)
    - [Functional Programming](#134-functional-programming)
    - [HTTP Functions](#135-http-functions)
    - [WebSocket Functions](#136-websocket-functions)
    - [Fiber and Concurrency Functions](#137-fiber-and-concurrency-functions)
14. [Error Handling](0014-ErrorHandling.md)
    - [The Result Type](#141-the-result-type)
15. [HTTP](0015-HTTP.md)
    - [HTTP Core Types](#151-http-core-types)
        - [HTTP Method Union Type](#http-method-union-type)
        - [HTTP Request Type (Immutable)](#http-request-type-immutable)
        - [HTTP Response Type (Immutable with Streaming)](#http-response-type-immutable-with-streaming)
    - [HTTP Server Functions](#152-http-server-functions)
        - [`httpCreateServer(port: Int, address: String) -> Result<ServerID, String>`](#httpcreateserverport-int-address-string---resultserverid-string)
        - [`httpListen(serverID: Int, handler: fn(String, String, String, String) -> HttpResponse) -> Result<Success, String>`](#httplistenserverid-int-handler-fnstring-string-string-string---httpresponse---resultsuccess-string)
        - [`httpStopServer(serverID: Int) -> Result<Success, String>`](#httpstopserverserverid-int---resultsuccess-string)
        - [HTTP Request Handling Bridge](#1521-http-request-handling-bridge)
            - [Request Handling Architecture](#request-handling-architecture)
            - [Function Pointer Callbacks](#function-pointer-callbacks)
            - [Callback Architecture Flow](#callback-architecture-flow)
    - [HTTP Client Functions](#153-http-client-functions)
        - [`httpCreateClient(baseUrl: String, timeout: Int) -> Result<ClientID, String>`](#httpcreateclientbaseurl-string-timeout-int---resultclientid-string)
        - [`httpGet(clientID: Int, path: String, headers: String) -> Result<HttpResponse, String>`](#httpgetclientid-int-path-string-headers-string---resulthttpresponse-string)
        - [`httpPost(clientID: Int, path: String, body: String, headers: String) -> Result<HttpResponse, String>`](#httppostclientid-int-path-string-body-string-headers-string---resulthttpresponse-string)
        - [`httpPut(clientID: Int, path: String, body: String, headers: String) -> Result<HttpResponse, String>`](#httpputclientid-int-path-string-body-string-headers-string---resulthttpresponse-string)
        - [`httpDelete(clientID: Int, path: String, headers: String) -> Result<HttpResponse, String>`](#httpdeleteclientid-int-path-string-headers-string---resulthttpresponse-string)
        - [`httpRequest(clientID: Int, method: HttpMethod, path: String, headers: String, body: String) -> Result<HttpResponse, String>`](#httprequestclientid-int-method-httpmethod-path-string-headers-string-body-string---resulthttpresponse-string)
        - [`httpCloseClient(clientID: Int) -> Result<Success, String>`](#httpcloseclientclientid-int---resultsuccess-string)
       - [Complete HTTP Server Example](#154-complete-http-server-example)
16. [WebSockets](0016-WebSockets.md)
    - [WebSocket Core Types](#161-websocket-core-types)
    - [WebSocket Security Implementation](#162-websocket-security-implementation)
    - [WebSocket Client Functions](#163-websocket-client-functions)
        - [`websocketConnect(url: String, messageHandler: fn(String) -> Result<Success, String>) -> Result<WebSocketID, String>`](#websocketconnecturl-string-messagehandler-fnstring---resultsuccess-string---resultwebsocketid-string)
        - [`websocketSend(wsID: Int, message: String) -> Result<Success, String>`](#websocketsendwsid-int-message-string---resultsuccess-string)
        - [`websocketClose(wsID: Int) -> Result<Success, String>`](#websocketclosewsid-int---resultsuccess-string)
    - [WebSocket Server Functions](#164-websocket-server-functions)
        - [`websocketCreateServer(port: Int, address: String, path: String) -> Result<ServerID, String>`](#websocketcreateserverport-int-address-string-path-string---resultserverid-string)
        - [`websocketServerListen(serverID: Int) -> Result<Success, String>`](#websocketserverlistenserverid-int---resultsuccess-string)
        - [`websocketServerBroadcast(serverID: Int, message: String) -> Result<Success, String>`](#websocketserverbroadcastserverid-int-message-string---resultsuccess-string)
        - [`websocketStopServer(serverID: Int) -> Result<Success, String>`](#websocketstopserverserverid-int---resultsuccess-string)
    - [Complete WebSocket Example](#165-complete-websocket-example)
17. [Security and Sandboxing](0017-SecurityAndSandboxing.md)
    - [Security Flags](#171-security-flags)
    - [Security Policies](#172-security-policies)
    - [Blocked Functions by Category](#173-blocked-functions-by-category)
    - [Error Messages](#174-error-messages)
    - [Programming Best Practices](#175-programming-best-practices)
    - [Implementation Details](#176-implementation-details)