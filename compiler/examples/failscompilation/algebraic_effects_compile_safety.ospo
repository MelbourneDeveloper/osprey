// ðŸš€ SUPREMO COMPILE-TIME EFFECT SAFETY DEMO! ðŸ”¥
// Proving Osprey's REVOLUTIONARY effect safety guarantees!

// ðŸš¨ UNHANDLED EFFECT TEST - SHOULD FAIL COMPILATION! ðŸš¨

// IO effect for input/output operations
effect IO {
    read: fn() -> string
    write: fn(string) -> Unit
}

// Network effect for network operations  
effect Network {
    request: fn(string) -> string
    broadcast: fn(string) -> Unit
}

// Error effect for error handling
effect Error {
    throw: fn(string) -> Unit
    recover: fn() -> string
}

// Function that performs IO effects without handling them - should fail!
fn unsafeOperationInOtherLanguages() -> string = {
    perform IO.write("Starting unsafe operation...")  // UNHANDLED EFFECT!
    let userInput = perform IO.read()                  // UNHANDLED EFFECT!
    "Operation completed: " + userInput
}

// Function that demonstrates multiple effect safety
fn multiEffectOperation() -> string ![Network, Error] = {
    let response = perform Network.request("https://api.example.com")
    match response {
        "error" => {
            perform Error.throw("Network request failed!")
            ""  // Never reached
        }
        _ => {
            perform Network.broadcast("Success: " + response)
            response
        }
    }
}

// Function showing Osprey's safety vs other languages
fn demonstrateRevolutionarySafety() -> Unit = {
    print("ðŸš€ OSPREY'S REVOLUTIONARY EFFECT SAFETY!")
    print("=".repeat(50))
    print("")
    print("ðŸ”¥ THE PROBLEM WITH OTHER LANGUAGES:")
    print("- OCaml Effects: Runtime crashes on unhandled effects")
    print("- Eff Language: Runtime exceptions kill your program")  
    print("- Koka Effects: Runtime aborts crash your application")
    print("- JavaScript: Unhandled promises crash silently")
    print("- Java: Checked exceptions you can forget to catch")
    print("")
    print("ðŸŽ¯ OSPREY'S SOLUTION:")
    print("- COMPILATION ERROR for unhandled effects")
    print("- IMPOSSIBLE to ship code with unhandled effects")
    print("- GUARANTEED SAFETY at compile time")
    print("- ZERO RUNTIME EFFECT CRASHES")
    print("")
    print("ðŸš¨ DEMONSTRATION:")
    print("The following would cause COMPILATION ERRORS:")
    print("")
    print("âŒ let result = unsafeOperationInOtherLanguages()")
    print("   Error: Unhandled effect 'IO' - must be handled!")
    print("")
    print("âŒ let data = multiEffectOperation()")  
    print("   Error: Unhandled effects 'Network, Error' - must be handled!")
    print("")
    print("âœ… In other languages: These would CRASH AT RUNTIME")
    print("âœ… In Osprey: These CANNOT COMPILE - preventing crashes!")
    print("")
    print("ðŸ”¥ RESULT: 100% EFFECT SAFETY GUARANTEED!")
}

// Function demonstrating the superiority  
fn compareWithOtherLanguages() -> Unit = {
    print("ðŸ“Š EFFECT SAFETY COMPARISON:")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ Language        â”‚ Unhandled Effectâ”‚ Safety Level    â”‚")  
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ OCaml Effects   â”‚ Runtime crash   â”‚ âŒ Unsafe        â”‚")
    print("â”‚ Eff Language    â”‚ Runtime exceptionâ”‚ âŒ Unsafe        â”‚") 
    print("â”‚ Koka Effects    â”‚ Runtime abort   â”‚ âŒ Unsafe        â”‚")
    print("â”‚ ðŸ”¥ OSPREY ðŸ”¥     â”‚ COMPILATION ERRORâ”‚ âœ… 100% SAFE    â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    print("")
    print("ðŸš€ OSPREY: THE FIRST LANGUAGE WITH TRULY SAFE EFFECTS!")
}

// Main function that calls the unsafe function
fn main() -> Unit = {
    let result = unsafeOperationInOtherLanguages()  // This should cause compilation error!
    print(result)
} 